steps:
  - label: ":wave:"
    agents:
      queue: {{.queue}}
    env:
      BUILDKITE_SHELL: /bin/sh -e -c
      BUILDKITE_GIT_CLONE_MIRROR_FLAGS: --mirror
      BUILDKITE_GIT_MIRRORS_PATH: /tmp/buildkite-git-mirrors
    plugins:
      - kubernetes:
          podSpec:
            containers:
              - image: alpine:latest
                command: [touch]
                args: [/tmp/buildkite-git-mirrors/somefile.txt]
              - name: host-volume
                hostPath:
                  path: /host/shared/folder
                  type: ''
          extraVolumeMounts:
              - name: host-volume
                mountPath: /tmp/buildkite-git-mirrors
                subPath: buildkite-git-mirrors
